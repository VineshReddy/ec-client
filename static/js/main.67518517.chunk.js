(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[1],{12:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(11),r=n(0),c=n.n(r),o=n(2),u=function(e,t){switch(t.type){case"USER_LOADING":return Object(o.a)({},e,{isLoading:!0});case"USER_LOADED":return Object(o.a)({},e,{isAuthenticated:!0,isLoading:!1,user:t.payload});case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":return localStorage.setItem("token",t.payload.token),Object(o.a)({},e,{},t.payload,{isAuthenticated:!0,isLoading:!1});case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT_SUCCESS":case"REGISTER_FAIL":return localStorage.removeItem("token"),Object(o.a)({},e,{token:null,user:null,isAuthenticated:!1,isLoading:!1});default:throw new Error("Unhandled action type: ".concat(t.type))}},i=Object(r.createContext)(),s={token:localStorage.getItem("token"),isAuthenticated:null,isLoading:!1,user:null};t.b=function(e){var t=Object(r.useReducer)(u,s),n=Object(a.a)(t,2),o=n[0],l=n[1];return c.a.createElement(i.Provider,{value:{auth:o,dispatch:l}},e.children)}},15:function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(){return r.a.createElement("main",{className:"flex-center rem15"},"Loading...")}},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(11),r=n(0),c=n.n(r),o=n(37),u=n(2),i=function(e,t){switch(t.type){case"FETCH_CART":return Object(u.a)({},e,{products:{},loading:!0});case"FETCH_CART_SUCCESS":return Object(u.a)({},e,{products:t.payload,loading:!1});case"ADD_CART":var n=e.products.filter((function(e){return e.id==t.payload.id})).length,a=e.products.map((function(e){return e.id==t.payload.id?Object(u.a)({},e,{quantity:e.quantity+1}):e}));return Object(u.a)({},e,{products:0==n?[t.payload].concat(Object(o.a)(e.products)):a});case"DEL_CART":return Object(u.a)({},e,{products:e.products.filter((function(e){return e.id!==t.payload}))});case"DEC_CART":case"INC_CART":return Object(u.a)({},e,{products:t.payload});case"CLEAR_CART":return Object(u.a)({},e,{products:[]});default:return e}},s=Object(r.createContext)(),l={products:[],loading:!1};t.b=function(e){var t=Object(r.useReducer)(i,l),n=Object(a.a)(t,2),o=n[0],u=n[1];return c.a.createElement(s.Provider,{value:{cart:o,dispatch:u}},e.children)}},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s}));var a=n(13),r=n.n(a),c=n(23),o={headers:{"Content-Type":"application/json"}},u=function(){return new Promise((function(e,t){r.a.get("/api/auth/user",Object(c.a)()).then((function(t){return e(t)})).catch((function(e){return t(e.response.data)}))}))},i=function(e){var t=e.name,n=e.email,a=e.password,c=e.mobile,u=JSON.stringify({name:t,email:n,password:a,mobile:c});return new Promise((function(e,t){r.a.post("/api/auth/register",u,o).then((function(t){return e(t)})).catch((function(e){return t(e.response.data)}))}))},s=function(e){var t=e.email,n=e.password,a=JSON.stringify({email:t,password:n});return new Promise((function(e,t){r.a.post("/api/auth/login",a,o).then((function(t){return e(t)})).catch((function(e){return t(e.response.data)}))}))}},23:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(){var e={headers:{"Content-type":"application/json"}},t=localStorage.getItem("token");return t&&(e.headers["x-auth-token"]=t),e}},38:function(e,t,n){e.exports=n(68)},43:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(34),o=n.n(c),u=n(19),i=(n(43),n(44),n(45),n(12)),s=n(22),l=n(15),d=r.a.lazy((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,82))})),p=r.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,83))}));var f=function(){var e=Object(a.useContext)(i.a),t=e.auth,n=e.dispatch;Object(a.useEffect)((function(){return t.token&&(n({type:"USER_LOADING"}),Object(s.a)(t.token).then((function(e){return n({type:"USER_LOADED",payload:e.data})})).catch((function(e){return n({type:"AUTH_ERROR"})}))),function(){return!1}}),[]);var c=t.isAuthenticated,o=t.isLoading;return r.a.createElement("div",{className:"App"},r.a.createElement(u.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(a.Suspense,{fallback:l.a},o?r.a.createElement(l.a,null):c?r.a.createElement(d,null):r.a.createElement(p,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var m=n(20);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.b,null,r.a.createElement(m.b,null,r.a.createElement(f,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,2,3]]]);
//# sourceMappingURL=main.67518517.chunk.js.map